<a href="/disposiciones/lista" class="btn btn-outline-danger">Volver</a>

<div class="d-flex align-items-center flex-column">
    <div id="a√±-ag-reg" class="fs-3 p-2 fw-bold w-75">üè∑Ô∏è Crear Disposici√≥n</div>
    <div class="d-flex flex-column align-items-center w-75 pt-3 pb-3" style="background-color: var(--light-grey); border-bottom-left-radius: 25px; border-bottom-right-radius: 25px;">

        <form action="/disposiciones/crear" method="POST" class="w-75 d-flex flex-column align-items-center gap-3">

            <!-- Nombre de la Disposici√≥n -->
            <div class="input-group">
                <label class="input-group-text w-25">Nombre</label>
                <input type="text" name="nombre" class="form-control" placeholder="Ej: No contesta" required maxlength="100" />
            </div>

            <!-- Descripci√≥n -->
            <div class="input-group">
                <label class="input-group-text w-25">Descripci√≥n</label>
                <textarea name="descripcion" class="form-control" rows="2" placeholder="Descripci√≥n opcional"></textarea>
            </div>

            <!-- Tipo de Disposici√≥n -->
            <div class="input-group">
                <label class="input-group-text w-25">Tipo</label>
                <select name="tipo" class="form-select" required id="tipoDisposicion">
                    <option value="" selected disabled>Selecciona un tipo</option>
                    <option value="EXITOSA">‚úÖ Exitosa (Venta cerrada, Objetivo logrado)</option>
                    <option value="NO_CONTACTO">üìû No Contacto (No contesta, Ocupado, etc.)</option>
                    <option value="SEGUIMIENTO">üîÑ Seguimiento (Volver a llamar, Enviar info)</option>
                    <option value="NO_EXITOSA">‚ùå No Exitosa (No interesado, No califica)</option>
                </select>
            </div>

            <!-- Color -->
            <div class="input-group">
                <label class="input-group-text w-25">Color</label>
                <input type="color" name="color" class="form-control form-control-color" value="#6c757d" title="Selecciona un color" />
                <small class="text-muted ms-2">Color para visualizaci√≥n en reportes</small>
            </div>

            <!-- Requiere Callback -->
            <div class="form-check d-flex align-items-center gap-2 w-100 justify-content-center">
                <input type="checkbox" name="requiereCallback" value="true" class="form-check-input" id="requiereCallback" />
                <label class="form-check-label" for="requiereCallback">
                    üìû ¬øRequiere agendar callback? (Para seguimientos)
                </label>
            </div>

            <!-- Orden de visualizaci√≥n -->
            <div class="input-group">
                <label class="input-group-text w-25">Orden</label>
                <input type="number" name="orden" class="form-control" value="0" min="0" />
                <small class="text-muted ms-2">Orden de aparici√≥n en listas (0 = primero)</small>
            </div>

            <!-- Botones -->
            <div class="w-50 d-flex justify-content-around align-items-center m-4 gap-2">
                <a href="/disposiciones/lista" class="btn btn-danger w-50">üóëÔ∏è Cancelar</a>
                <button type="submit" class="btn btn-success w-50" style="background-color: var(--corporate-mint); outline: none; border: none;">üíæ Guardar</button>
            </div>

        </form>
    </div>
</div>

<script>
    // Sugerir colores seg√∫n el tipo seleccionado
    document.getElementById('tipoDisposicion').addEventListener('change', function() {
        const colorInput = document.querySelector('input[name="color"]');
        const callbackCheckbox = document.getElementById('requiereCallback');

        const coloresSugeridos = {
            'EXITOSA': '#28a745',      // Verde
            'NO_CONTACTO': '#ffc107',  // Amarillo
            'SEGUIMIENTO': '#007bff',  // Azul
            'NO_EXITOSA': '#dc3545'    // Rojo
        };

        if (coloresSugeridos[this.value]) {
            colorInput.value = coloresSugeridos[this.value];
        }

        // Auto-sugerir callback para SEGUIMIENTO
        if (this.value === 'SEGUIMIENTO') {
            callbackCheckbox.checked = true;
        } else {
            callbackCheckbox.checked = false;
        }
    });
</script>
