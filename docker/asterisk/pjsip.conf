;
; PJSIP Configuration for Welcomedly
; Sprint 3.1.4 - WebRTC + SIP Trunk Support
;

;========== Transport Configuration ==========

[transport-udp]
type=transport
protocol=udp
bind=0.0.0.0:5060

[transport-wss]
type=transport
protocol=wss
bind=0.0.0.0:8089
;external_media_address=YOUR_PUBLIC_IP
;external_signaling_address=YOUR_PUBLIC_IP

;========== Agent Template ==========

[agent-template](!)
type=endpoint
context=welcomedly-agents
disallow=all
allow=ulaw
allow=alaw
allow=opus
allow=gsm
webrtc=yes
dtls_auto_generate_cert=yes
media_encryption=dtls
dtls_verify=fingerprint
dtls_setup=actpass
ice_support=yes
use_avpf=yes
force_avp=no
rtp_symmetric=yes
rewrite_contact=yes
direct_media=no

;========== Agent Endpoints (Auto-generated) ==========
; SIP peers will be created dynamically via database
; Template: agent1001, agent1002, etc.

;========== Example Trunk: Twilio ==========

[twilio-auth](!)
type=auth
auth_type=userpass

[twilio-aor](!)
type=aor
qualify_frequency=60
maximum_expiration=3600
minimum_expiration=60

[twilio-endpoint](!)
type=endpoint
context=welcomedly-outbound
disallow=all
allow=ulaw
allow=alaw
dtmf_mode=rfc4733
direct_media=no
trust_id_inbound=yes
send_rpid=yes
rtp_symmetric=yes

;========== Example Trunk: Vonage ==========

[vonage-auth](!)
type=auth
auth_type=userpass

[vonage-aor](!)
type=aor
qualify_frequency=60

[vonage-endpoint](!)
type=endpoint
context=welcomedly-outbound
disallow=all
allow=ulaw
allow=alaw
dtmf_mode=rfc4733
direct_media=no

;========== Global Settings ==========

[global]
type=global
max_forwards=70
user_agent=Welcomedly PBX
default_outbound_endpoint=default_outbound_endpoint
